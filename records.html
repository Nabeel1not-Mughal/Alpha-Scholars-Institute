<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ“‹ Students Record</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #e8f5e9;
            margin: 0;
            padding: 30px;
            color: #0a192f;
        }

        .container {
            max-width: 1400px;
            margin: auto;
            background: #fff;
            padding: 40px 50px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2e7d32;
            font-size: 38px;
            margin-bottom: 30px;
        }

        .search-container {
            margin-bottom: 20px;
            display: flex;
            justify-content: flex-end;
        }

        .search-container input {
            padding: 12px 18px;
            width: 300px;
            border-radius: 12px;
            border: 2px solid #ccc;
            font-size: 15px;
            transition: 0.3s;
        }

        .search-container input:focus {
            border-color: #2e7d32;
            box-shadow: 0 0 8px rgba(46, 125, 50, 0.3);
            outline: none;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 14px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }

        th,
        td {
            padding: 14px 12px;
            text-align: center;
        }

        th {
            background: linear-gradient(135deg, #2e7d32, #4caf50);
            color: #fff;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        tbody tr {
            transition: 0.3s;
        }

        tbody tr:nth-child(even) {
            background: #f4f9f4;
        }

        tbody tr:hover {
            background: #e1f5e1;
        }

        td input {
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 5px 6px;
            font-size: 13px;
            transition: border 0.3s;
        }

        td input:disabled {
            background: transparent;
            border: none;
            color: #0a192f;
            font-weight: 500;
        }

        td input:enabled {
            border-color: #2e7d32;
        }

        button {
            padding: 7px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: 0.3s;
        }

        .edit-btn {
            background: #1976d2;
            color: white;
            margin-right: 5px;
        }

        .edit-btn:hover {
            background: #115293;
        }

        .delete-btn {
            background: crimson;
            color: white;
        }

        .delete-btn:hover {
            background: #a30000;
        }

        .pagination {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .page-btn {
            padding: 6px 14px;
            border-radius: 6px;
            border: 1px solid #ccc;
            cursor: pointer;
            transition: 0.3s;
        }

        .page-btn.active {
            background: #2e7d32;
            color: white;
            border-color: #2e7d32;
        }

        .page-btn:hover:not(.active) {
            background: #f0f4f8;
        }

        .toaster {
            position: fixed;
            top: 20px;
            right: 20px;
            min-width: 250px;
            background: #2e7d32;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            display: none;
            z-index: 1000;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 1200px) {
            .container {
                padding: 30px 20px;
            }

            .search-container input {
                width: 200px;
            }

            table {
                font-size: 13px;
            }
        }

        @media (max-width: 768px) {

            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
            }

            thead tr {
                display: none;
            }

            tbody tr {
                margin-bottom: 20px;
                border: 1px solid #ccc;
                border-radius: 12px;
                padding: 12px;
                background: #f9fff9;
            }

            td {
                text-align: left;
                padding: 8px;
                display: flex;
                justify-content: space-between;
            }

            td input {
                width: 50%;
            }

            td::before {
                content: attr(data-label);
                font-weight: 600;
            }

            .pagination {
                flex-wrap: wrap;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>ðŸ“‹ Students Record</h1>

        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search by Name, Course or Reg No">
        </div>

        <table id="studentsTable">
            <thead>
                <tr>
                    <th>Reg No</th>
                    <th>Name</th>
                    <th>Father Name</th>
                    <th>DOB</th>
                    <th>Phone</th>
                    <th>B-Form</th>
                    <th>Religion</th>
                    <th>Address</th>
                    <th>Course</th>
                    <th>Gender</th>
                    <th>Admission Fee</th>
                    <th>Monthly Fee</th>
                    <th>Total Fee</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Students will appear here -->
            </tbody>
        </table>

        <div class="pagination" id="pagination"></div>
    </div>

    <div id="toaster" class="toaster"></div>

    <script>
        let students = JSON.parse(localStorage.getItem('students') || '[]');
        const tableBody = document.querySelector('#studentsTable tbody');
        const searchInput = document.getElementById('searchInput');
        const toaster = document.getElementById('toaster');
        const rowsPerPage = 5;
        let currentPage = 1;
        let filteredStudents = [...students];

        function showToaster(msg) {
            toaster.innerText = msg;
            toaster.style.display = 'block';
            setTimeout(() => { toaster.style.display = 'none'; }, 3000);
        }

        function renderTable(page = 1) {
            tableBody.innerHTML = '';
            const start = (page - 1) * rowsPerPage;
            const paginatedStudents = filteredStudents.slice(start, start + rowsPerPage);

            paginatedStudents.forEach((s, index) => {
                const tr = document.createElement('tr');

                const fields = ['regNo', 'name', 'fatherName', 'dob', 'phone', 'bform', 'religion', 'address', 'course', 'gender', 'admission_fee', 'monthly_fee', 'total_fee'];

                fields.forEach(field => {
                    const td = document.createElement('td');
                    td.setAttribute('data-label', field.replace(/_/g, ' ').toUpperCase());
                    const input = document.createElement('input');
                    input.value = s[field];
                    input.disabled = true;
                    input.dataset.field = field;
                    td.appendChild(input);
                    tr.appendChild(td);
                });

                const actionsTd = document.createElement('td');
                actionsTd.setAttribute('data-label', 'Actions');
                const editBtn = document.createElement('button');
                editBtn.className = 'edit-btn';
                editBtn.innerText = 'Update';
                editBtn.dataset.index = start + index;

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn';
                deleteBtn.innerText = 'Delete';
                deleteBtn.dataset.index = start + index;

                actionsTd.appendChild(editBtn);
                actionsTd.appendChild(deleteBtn);
                tr.appendChild(actionsTd);

                tableBody.appendChild(tr);
            });

            renderPagination();
        }

        function renderPagination() {
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';
            const totalPages = Math.ceil(filteredStudents.length / rowsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                btn.className = 'page-btn' + (i === currentPage ? ' active' : '');
                btn.addEventListener('click', () => {
                    currentPage = i;
                    renderTable(currentPage);
                });
                paginationDiv.appendChild(btn);
            }
        }

        tableBody.addEventListener('click', (e) => {
            const row = e.target.closest('tr');
            const idx = parseInt(e.target.dataset.index);

            if (e.target.classList.contains('edit-btn')) {
                const inputs = row.querySelectorAll('td input');
                if (e.target.innerText === 'Update') {
                    inputs.forEach(input => {
                        if (input.dataset.field !== 'regNo') input.disabled = false;
                    });
                    e.target.innerText = 'Save';
                } else {
                    inputs.forEach(input => input.disabled = true);
                    inputs.forEach(input => {
                        const field = input.dataset.field;
                        students[idx][field] = input.value;
                    });
                    localStorage.setItem('students', JSON.stringify(students));
                    e.target.innerText = 'Update';
                    showToaster('âœ… Student record updated!');
                    filteredStudents = [...students];
                    renderTable(currentPage);
                }
            }

            if (e.target.classList.contains('delete-btn')) {
                if (confirm('Are you sure you want to delete this student?')) {
                    students.splice(idx, 1);
                    localStorage.setItem('students', JSON.stringify(students));
                    showToaster('âœ… Student record deleted!');
                    filteredStudents = [...students];
                    if ((currentPage - 1) * rowsPerPage >= filteredStudents.length && currentPage > 1) currentPage--;
                    renderTable(currentPage);
                }
            }
        });

        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            filteredStudents = students.filter(s =>
                s.name.toLowerCase().includes(query) ||
                s.course.toLowerCase().includes(query) ||
                s.regNo.toString().includes(query)
            );
            currentPage = 1;
            renderTable(currentPage);
        });

        renderTable(currentPage);
    </script>

</body>

</html>